<!doctype html>
{% load sass_tags %}
{% load humanize %}
<html>

<head>
  <meta charset="utf-8">
  <meta name="author" content="Sam Ireland">
  <meta name="description" content="Habit Tracking">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Habit Tracking</title>
  <script src="https://code.jquery.com/jquery.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
  <link href="{% sass_src 'css/style.scss' %}" rel="stylesheet" type="text/css">
  {% block css %}{% endblock %}
  <!--analytics-->
</head>

<body>
    <table>
        <tr>
            <td class="no-border"></td>
            {% for history in progressium.histories %}
            <td>{{ history.next_cheat }}</td>
            {% endfor %}
            <td class="no-border"></td>
            <td class="no-border"><a href="?day={{ previous }}">&#9664;</a></td>
            <td class="no-border"><a href="?day={{ next }}">&#9654;</a></td>
        </tr>
        <tr>
            <td class="no-border"></td>
            {% for history in progressium.histories %}
            <td>{{ history.target_streak }} <span>üéØ</span></td>
            {% endfor %}
        </tr>
        <tr>
            <td class="no-border"></td>
            {% for history in progressium.histories %}
            <td>{{ history.badges }} <span>üèÜ</span></td>
            {% endfor %}
        </tr>
        <tr>
            <th>Date</th>
            {% for habit in progressium.habits %}
            <th>{{ habit.name }}</th>
            {% endfor %}
            <th>Day Total</th>
            <th>Weighted Total</th>
            <th>Running Total</th>
        </tr>
        {% for day in progressium.days reversed %}
        <tr>
            <td>{{ day.date|naturalday|title }}</td>
            {% for score in day.scores %}
            <td class="score {% if score > 0 %}good{% else %}{% if score == 0 %}fine{% else %}{% if score < 0 %}wrong{% endif %}{% endif %}{% endif %}">{% if score != None %}{{ score }}{% endif %}</td>
            {% endfor %}
            <td>{{ day.score_total }}</td>
            <td>{{ day.weighted_total|floatformat:"2" }}</td>
            <td>{{ day.running_total|floatformat:"2" }}</td>
        </tr>
        {% endfor %}
    </table>
</body>

</html>
